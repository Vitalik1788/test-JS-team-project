{"mappings":"6mBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,uCC2BT,IAAAE,E,6EA5CA,IAAIC,EAAY,GA6BhB,SAASC,EAAWC,GAClB,OAAQ,GAAKA,GAAKC,QAAO,+DAAiE,MAAQ,G,CAcpGJ,EA1CA,SAA4BH,GAC1B,IAAIQ,EAAQJ,EAAUJ,GAOtB,OALKQ,IACHA,EAOJ,WACE,IACE,MAAM,IAAIN,K,CACV,MAAOO,GACP,IAAIC,GAAW,GAAKD,EAAIE,OAAOC,MAAK,yDAEpC,GAAIF,EAGF,OAAOL,EAAWK,EAAQ,G,CAI9B,MAAO,G,CApBGG,GACRT,EAAUJ,GAAMQ,GAGXA,C,KCZTM,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,oJCAzDH,EAAA,S,WCAAA,EAAA,S,kDCAiBA,EAAA,SAAAI,aAA6C,SAAWJ,EAAA,SAAAK,QAA6C,SCKnGC,SAASC,cAAc,sBAC3BD,SAASC,cAAc,QAoHtCC,OAAOC,iBAAiB,oBAAoB,WACnBH,SAASC,cAAc,sBAC/BE,iBAAiB,SAAS,SAAUC,GACjD,IACMC,EADWD,EAAEE,OACcC,QAAQ,uBACzC,GAAIF,EAAe,CACjB,IAAMG,EAAUH,EAAcI,aAAa,YAC3C,EAAAC,EAAAC,oBAAmBH,E","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-79e102e5d49ec7f1.js","src/library-page.js","src/javascript/library/api-library.js","node_modules/@parcel/runtime-js/lib/runtime-4fedde60a42448cb.js","src/javascript/library/library.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"eRdUl\\\":\\\"library.0b266df0.js\\\",\\\"iNwWb\\\":\\\"default.183d728c.jpg\\\",\\\"7J1lJ\\\":\\\"library.34f3f1a8.js\\\"}\"));","import './javascript/header';\nimport './javascript/scroll-up';\nimport './javascript/library/library';\n","import axios from \"axios\";\n\n\nconst API_KEY = 'b67c8518c930f00572f5eefdd7a9d563';\n\n\nasync function getMoviById(id) {\n    const options = {\n        method: 'GET',\n        headers: {\n          accept: 'application/json',\n          Authorization: `Bearer ${API_KEY}`,\n        },\n      };\n    return axios\n      .get(`https://api.themoviedb.org/3/movie/${id}?api_key=${API_KEY}`)\n\n      \n      .then(res => (res))\n      \n      .catch(error => {\n        console.log('EROR');\n      });\n\n     \n}\nexport default { getMoviById }","module.exports = require('./helpers/bundle-url').getBundleURL('eRdUl') + require('./helpers/bundle-manifest').resolve(\"iNwWb\");","import API from './api-library';\nimport { STORAGE_KEY } from '../../fetch/api_key';\nimport { openModalAboutFilm } from '../movieModal';\nimport { errorMarkup, onCreateLibraryMarkup } from './library-markup';\n\nconst libraryRef = document.querySelector('.library-card-list');\nconst btnLib = document.querySelector('.btn');\n\n// window.addEventListener('DOMContentLoaded', () => {\n//   const library = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];\n//   // if(libraryRef) createLibraryMarkup(library);\n//   let totalElementInList = 0;\n//   let firstEl = 0;\n//   getLibrarylistInParts(library);\n// });\n\n// btnLib?.addEventListener('click', function (event) {\n//   getLibrarylistInParts(library);\n//   firstEl += 6;\n//   totalElementInList += 6;\n// });\n\n// let totalElementInList = 0;\n// let firstEl = 0;\n// let lostEl = firstEl + 6;\n\n// function getLibrarylistInParts(library) {\n//   const totalLiberyLength = library.length;\n//   const libraryInParts = library.slice(firstEl, lostEl);\n//   if (totalLiberyLength - totalElementInList <= 6) {\n//     createLibraryMarkup(libraryInParts);\n//   } else {\n//     createLibraryMarkup(libraryInParts);\n//     libraryRef.insertAdjacentHTML(\n//       'afterend',\n//       ` <div class=\"lib-btn-cont\"><button class=\"btn btn-search-movie\" type=\"button\">Load more</button></div>`\n//     );\n//   }\n// }\n\n// export function handleFilm(e) {\n//   const id = e.target.dataset.id;\n\n//   if (e.target.hasAttribute('data-add')) {\n//     // btnLib.removeAttribute('data-add');\n//     // btnLib.setAttribute('data-remove', '');\n//     // btnLib.textContent = 'Remove from my library';\n//     setBtnProp(e.target, addOps);\n\n//     addFilmToLibrary(id);\n\n//     //\n//   } else if (e.target.hasAttribute('data-remove')) {\n//     console.log('data-remove');\n\n//     e.target.removeAttribute('data-remove');\n//     e.target.setAttribute('data-add', '');\n//     e.target.textContent = 'Add to my library';\n\n//     deleteCardLibrary(id);\n//   }\n// }\n\n// const addOps = {\n//   addAttr: 'data-remove',\n//   removeAttr: 'data-add',\n//   btnText: 'Remove from my library',\n// };\n\n// function setBtnProp(el, props) {\n//   const { addAttr, removeAttr, btnText } = props;\n\n//   el.removeAttribute(removeAttr);\n//   el.setAttribute(addAttr, '');\n//   el.textContent = btnText;\n// }\n\n// /////// ПРОВЕРКА НАЛИЧИЯ ID В LOCAL STORAGE /////////\n\n// /////// ПОЛУЧЕНИЯ ОТ СЕРВЕРА ФИЛЬМА ПО ID ///////\n\n// async function getMovieById(id) {\n//   const responce = await API.getMoviById(id);\n//   return responce.data;\n// }\n\n// ///// ФУНКЦИЯ ДОБАВЛЕНИЯ В LOCAL STORAGE ///////\n\n// export async function addFilmToLibrary(id) {\n//   const libraryList = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];\n//   const isAtLibrary = libraryList?.find(x => x.id === Number(id));\n\n//   if (isAtLibrary) return console.log('film is at list');\n\n//   const movieObj = await getMovieById(id);\n//   libraryList.push(movieObj);\n//   localStorage.setItem(STORAGE_KEY, JSON.stringify(libraryList));\n// }\n\n// ///// ФНКЦИЯ УДАЛЕНИЯ ИЗ LOCAL STORAGE ///////\n\n// export function deleteCardLibrary(id) {\n//   const libraryList = JSON.parse(localStorage.getItem(STORAGE_KEY));\n//   const itemToDelete = libraryList.find(film => film.id === id);\n\n//   libraryList.pop(itemToDelete);\n//   localStorage.setItem(STORAGE_KEY, JSON.stringify(libraryList));\n\n//   if (location.pathname === '/library.html') {\n//     // libraryRef.innerHTML = '';\n//     createLibraryMarkup(libraryList);\n//   }}\n\nfunction createLibraryMarkup(libraryInParts) {\n  if (libraryInParts.length === 0) {\n    const createErrorMarkup = errorMarkup();\n    libraryRef.innerHTML = createErrorMarkup;\n  }\n  const sucsessMurkup = onCreateLibraryMarkup(libraryInParts);\n  libraryRef.insertAdjacentHTML('beforeend', sucsessMurkup);\n}\n\nwindow.addEventListener('DOMContentLoaded', () => {\n  const watchAddedCard = document.querySelector('.library-card-list');\n  watchAddedCard.addEventListener('click', function (e) {\n    let targetItem = e.target;\n    const currentButton = targetItem.closest('.watch-more-details');\n    if (currentButton) {\n      const movieId = currentButton.getAttribute('data-id');\n      openModalAboutFilm(movieId);\n    }\n  });\n});\n"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","getBundleURL","resolve","document","querySelector","window","addEventListener","e","currentButton","target","closest","movieId","getAttribute","$VuQ7E","openModalAboutFilm"],"version":3,"file":"library.0b266df0.js.map"}