!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},o={},i=n.parcelRequired7c6;null==i&&((i=function(e){if(e in r)return r[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},n.parcelRequired7c6=i),i.register("6Ytd7",(function(n,r){t(n.exports,"getGenres",(function(){return d})),t(n.exports,"validateGenres",(function(){return u}));var o=i("bpxeT"),a=i("2TvXO"),l=i("8xer1"),s=i("dIxxU");function d(){return c.apply(this,arguments)}function c(){return(c=e(o)(e(a).mark((function t(){var n;return e(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.default.get("https://api.themoviedb.org/3/genre/movie/list?api_key=41b8f9437bf3f899281f8a3f9bdc0891");case 3:return n=e.sent,localStorage.setItem("genres",JSON.stringify(n.data.genres)),e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),(0,l.onError)(e.t0);case 11:case"end":return e.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function u(e,t){return f.apply(this,arguments)}function f(){return(f=e(o)(e(a).mark((function t(n,r){var o,i,s;return e(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=Array.from(r),i=n.map((function(e){var t=o.find((function(t){return t.id===e}));return t?t.name:""})),s="",s=i.length>2?i.slice(0,2).join(", "):i.join(", "),e.abrupt("return",s);case 8:return e.prev=8,e.t0=e.catch(0),(0,l.onError)(e.t0),e.abrupt("return","");case 12:case"end":return e.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}})),i.register("8xer1",(function(n,r){t(n.exports,"onError",(function(){return u}));var o=i("bpxeT"),a=i("2TvXO"),l=i("dIxxU"),s=i("2Jvbp"),d=(s=i("2Jvbp"),i("6Ytd7"));document.querySelector(".cards-list");function c(){return(c=e(o)(e(a).mark((function t(){var n;return e(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.default.get("https://api.themoviedb.org/3/trending/all/week?api_key=41b8f9437bf3f899281f8a3f9bdc0891");case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),u(e.t0);case 10:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function u(e){console.log(" error  ".concat(e))}window.addEventListener("load",(function(){var e=window.innerWidth<768?1:3;(0,d.getGenres)(),function(){return c.apply(this,arguments)}().then((function(t){var n=t.data.results.slice(0,e);(0,s.createMarkup)(n)}))}))})),i.register("2Jvbp",(function(n,r){t(n.exports,"createMarkup",(function(){return c}));var o=i("bpxeT"),a=i("2TvXO"),l=i("6Ytd7"),s=i("b1uSG"),d=i("97b6U");function c(t){var n,r=t.map((n=e(o)(e(a).mark((function t(n){var r,o,i,d,c,u,f,m,p,v;return e(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,o=n.poster_path,i=n.release_date,d=n.title,c=n.genre_ids,u=n.vote_average,f=(0,l.validateGenres)(c,JSON.parse(localStorage.getItem("genres"))),m="https://image.tmdb.org/t/p/original/".concat(o),p="",p="undefind"===i?"Date unknown":i.split("-")[0],e.next=7,f;case 7:return v=e.sent,e.abrupt("return",'<li class="card-item item" data-id="'.concat(r,'">\n            <img class="film-poster" src="https://image.tmdb.org/t/p/original/').concat(m,'" alt="').concat(d,' poster" />\n            <div class="overlay">\n              <div class="film-info">\n                <p class="film-title">').concat(d,'</p>\n                <div class="film-details">\n                  <span class="film-description">').concat(v," | ").concat(p,'</span>\n                  <div class="stars-container">').concat((0,s.default)({voteAverage:u,isHero:!1}),'</div>\n\t\t\t\t\t\t\t\t\t\x3c!-- <span class="film-rating">').concat(u,"</span> --\x3e\n                </div>\n              </div>\n            </div>\n          </li>"));case 9:case"end":return e.stop()}}),t)}))),function(e){return n.apply(this,arguments)}));return Promise.all(r).then((function(e){var t=e.join("");document.querySelector(".cards-list").insertAdjacentHTML("beforeend",t),document.querySelector(".listListener").addEventListener("click",(function(e){var t=e.target.closest(".card-item").getAttribute("data-id");(0,d.openModalAboutFilm)(t)}))}))}})),i.register("97b6U",(function(n,r){t(n.exports,"openModalAboutFilm",(function(){return v}));var o=i("8MBJY"),a=i("a2hTj"),l=i("2Ji9M"),s=i("idULJ"),d=i("8Z4qh"),c=i("fpBey"),u=i("jwJ37"),f=new(0,l.default)(c.API_KEY),m=null,p=function(){"use strict";function t(){var n=this;if(e(o)(this,t),null!==m)return m;this.body=document.querySelector("body"),this.body.insertAdjacentHTML("beforeend",'\n  <div class="modal-info-film-backdrop modal-film-is-hidden" data-modal>\n    <div class="modal-about-film">\n      <button type="button" class="modal__close-btn" data-modal-close>\n        <svg class="modal__close-icon" width="30" height="30" aria-label="Close">\n          <path d="M18 6L6 18M6 6L18 18"  stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />\n        </svg>\n      </button>\n      <div class="modal-film-info-wrapper">\n        <div class="modal-wrapper-img">\n          <img\n            class="modal-film-img"\n            id="modal-film-poster-path"\n            src="https://organisasi.kalbarprov.go.id/assets/images/no_image.png"\n            alt=""\n          />\n        </div>\n        <div class="film-text-info-wrapper">\n          <h3 class="modal-film-title" id="modal-film-title"></h3>\n          <ul class="modal-film-info-list">\n            <li class="modal-film-info-item">\n              <p class="modal-film-info-label">Vote / Votes</p>\n              <p class="modal-film-info-desc">\n                <span\n                  class="desc-voted desc-vote-average"\n                  id="modal-film-vote-average"\n                ></span>\n                /\n                <span\n                  class="desc-voted desc-votes-count"\n                  id="modal-film-vote-count"\n                ></span>\n              </p>\n            </li>\n            <li class="modal-film-info-item">\n              <p class="modal-film-info-label">Popularity</p>\n              <p class="modal-film-info-desc" id="modal-film-popularity"></p>\n            </li>\n            <li class="modal-film-info-item">\n              <p class="modal-film-info-label">Genre</p>\n              <p\n                class="modal-film-info-desc film-info__desc--normal-text"\n                id="modal-film-genre"\n              ></p>\n            </li>\n          </ul>\n          <p class="modal-film-info-label">ABOUT</p>\n          <div class="container-film-descr">\n            <p class="modal-film__description" id="modal-film-description"></p>\n          </div>\n          <button class="modal-btn-add-libr"  type="button" id="modal-film-add-or-rm">Add to my library</button>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  '),this.refs={modal:document.querySelector("[data-modal]"),modalCloseBtn:document.querySelector("[data-modal-close]"),posterPath:document.querySelector("#modal-film-poster-path"),title:document.querySelector("#modal-film-title"),voteAverage:document.querySelector("#modal-film-vote-average"),voteCount:document.querySelector("#modal-film-vote-count"),popularity:document.querySelector("#modal-film-popularity"),genre:document.querySelector("#modal-film-genre"),description:document.querySelector("#modal-film-description"),modalOpenBtn:document.querySelector("#open-modal"),modalAddOrRemoveBtn:document.querySelector("#modal-film-add-or-rm")},this.refs.modalCloseBtn.addEventListener("click",(function(){return n.hide()})),this.refs.modalAddOrRemoveBtn.addEventListener("click",(function(e){return(0,d.handleFilm)(e)})),document.addEventListener("keydown",(function(e){return"Escape"===e.key?n.hide():null})),window.addEventListener("click",(function(e){return e.target===n.refs.modal?n.hide():null})),m=this}return e(a)(t,[{key:"show",value:function(){this.refs.modal.classList.remove("modal-film-is-hidden"),this.body.classList.add("body--modal-open")}},{key:"hide",value:function(){this.refs.modal.classList.add("modal-film-is-hidden"),this.body.classList.remove("body--modal-open")}},{key:"refreshData",value:function(t){this.refs.posterPath.src=t.poster_path?"https://image.tmdb.org/t/p/w500".concat(t.poster_path):"".concat(e(u)),this.refs.title.textContent="".concat(t.title),this.refs.voteAverage.textContent="".concat((0,s.roundToTen)(t.vote_average)),this.refs.voteCount.textContent="".concat(t.vote_count),this.refs.popularity.textContent="".concat((0,s.roundToTen)(t.popularity)),this.refs.genre.textContent="".concat(t.genres.map((function(e){return e.name})).join(", ")),this.refs.description.textContent="".concat(t.overview)}},{key:"refreshBtn",value:function(e,t,n){this.refs.modalAddOrRemoveBtn.setAttribute("data-id",e),this.refs.modalAddOrRemoveBtn.setAttribute("data-"+t,""),this.refs.modalAddOrRemoveBtn.textContent=n}}]),t}();function v(e){var t=new p,n=(0,s.findFilmAtStorage)(c.STORAGE_KEY,e),r=n?"remove":"add",o=n?"Remove from my library":"Add to my library";f.getMovieDetails(e).then((function(n){t.refreshData(n.data),t.refreshBtn(e,r,o),t.show()})).catch((function(e){console.error(e)}))}})),i.register("2Ji9M",(function(n,r){t(n.exports,"default",(function(){return s}));var o=i("8MBJY"),a=i("a2hTj"),l=i("dIxxU"),s=function(){"use strict";function t(n){e(o)(this,t),this.apiKey=n}return e(a)(t,[{key:"getMovieDetails",value:function(e){var t="https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat(this.apiKey);return l.default.get(t)}}]),t}()})),i.register("idULJ",(function(e,n){function r(e){return Math.floor(10*e)/10}function o(e,t){var n=JSON.parse(localStorage.getItem(e));return(null==n?void 0:n.find((function(e){return e.id===t})))||null}t(e.exports,"roundToTen",(function(){return r})),t(e.exports,"findFilmAtStorage",(function(){return o}))})),i.register("jwJ37",(function(e,t){e.exports=i("aNJCr").getBundleURL("bYjUQ")+i("iE7OH").resolve("iNwWb")})),i("iE7OH").register(JSON.parse('{"bYjUQ":"index.dd640731.js","iNwWb":"default.183d728c.jpg","gqlnG":"library.d4416224.js"}')),i("8xer1")}();
//# sourceMappingURL=index.dd640731.js.map
