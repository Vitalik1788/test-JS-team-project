!function(){function t(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},o={},a=n.parcelRequired7c6;null==a&&((a=function(t){if(t in r)return r[t].exports;if(t in o){var e=o[t];delete o[t];var n={id:t,exports:{}};return r[t]=n,e.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(t,e){o[t]=e},n.parcelRequired7c6=a),a.register("iE7OH",(function(e,n){var r,o;t(e.exports,"register",(function(){return r}),(function(t){return r=t})),t(e.exports,"resolve",(function(){return o}),(function(t){return o=t}));var a={};r=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)a[e[n]]=t[e[n]]},o=function(t){var e=a[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),a.register("8Z4qh",(function(n,r){t(n.exports,"handleFilm",(function(){return v}));var o=a("bpxeT"),i=a("2TvXO"),c=a("JYr1o"),l=a("Tn86Q"),s=a("fpBey"),u=document.querySelector(".library-card-list"),f=document.querySelector(".btn");console.log(document.querySelector(".btn")),window.addEventListener("DOMContentLoaded",(function(){g(JSON.parse(localStorage.getItem(s.STORAGE_KEY))||[])})),null==f||f.addEventListener("click",(function(t){console.log("AAAAAAA"),g(library),p+=6,d+=6})),console.log(f);var d=0,p=0;function g(t){var e=t.length;console.log(e),lostEl=p+6,console.log(p),console.log(lostEl),console.log(e),console.log(e-d);var n=t.slice(p,lostEl);console.log(n),e-d<=6?A(n):(A(n),u.insertAdjacentHTML("afterend",' <div class="lib-btn-cont"><button class="btn btn-search-movie" type="button">Load more</button></div>'))}function v(t){var e,n,r,o,a,i=t.target.dataset.id;console.log(t.target),t.target.hasAttribute("data-add")?(console.log("data-add"),e=t.target,r=(n=m).addAttr,o=n.removeAttr,a=n.btnText,e.removeAttribute(o),e.setAttribute(r,""),e.textContent=a,function(t){y.apply(this,arguments)}(i)):t.target.hasAttribute("data-remove")&&(console.log("data-remove"),t.target.removeAttribute("data-remove"),t.target.setAttribute("data-add",""),t.target.textContent="Add to my library",function(t){var e=JSON.parse(localStorage.getItem(s.STORAGE_KEY)),n=e.find((function(e){return e.id===t}));e.pop(n),localStorage.setItem(s.STORAGE_KEY,JSON.stringify(e)),"/library.html"===location.pathname&&A(e)}(i))}var m={addAttr:"data-remove",removeAttr:"data-add",btnText:"Remove from my library"};function b(t){return h.apply(this,arguments)}function h(){return(h=e(o)(e(i).mark((function t(n){var r;return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.default.getMoviById(n);case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(){return(y=e(o)(e(i).mark((function t(n){var r,o;return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=JSON.parse(localStorage.getItem(s.STORAGE_KEY))||[],!(null==r?void 0:r.find((function(t){return t.id===Number(n)})))){t.next=4;break}return t.abrupt("return",console.log("film is at list"));case 4:return t.next=6,b(n);case 6:o=t.sent,r.push(o),localStorage.setItem(s.STORAGE_KEY,JSON.stringify(r));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(t){if(0===t.length)u.innerHTML='<div class="library-info library-info-container">\n                              <p class="library-info-text">\n                                OOPS... <br> We are very sorry!<br>\n                                You donâ€™t have any movies at your library.\n                              </p>\n                              <button class="btn btn-search-movie" type="button">Search movie</button>\n                            </div>';else{var n=t.map((function(t){var n=t.poster_path?"https://image.tmdb.org/t/p/w500".concat(t.poster_path):"".concat(e(l));return'<li class="card-item item">\n              <img class="film-poster" src="'.concat(n,'" alt="').concat(t.original_title,'" />\n              <div class="overlay">\n                <div class="film-info">\n                  <p class="film-title">').concat(t.original_title||t.name,'</p>\n                  <div class="film-details">\n                    <span class="film-description">').concat(new Date(t.release_date).getFullYear()||new Date(t.first_air_date).getFullYear(),' </span>\n                    <span class="film-rating">').concat(Math.round(t.vote_average),"</span>\n                  </div>\n                </div>\n              </div>\n            </li>")})).join("");u.innerHTML=n}}})),a.register("JYr1o",(function(n,r){t(n.exports,"default",(function(){return u}));var o=a("bpxeT"),i=a("2TvXO"),c=a("dIxxU"),l="b67c8518c930f00572f5eefdd7a9d563";function s(){return(s=e(o)(e(i).mark((function t(n){return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return{method:"GET",headers:{accept:"application/json",Authorization:"Bearer ".concat(l)}},t.abrupt("return",c.default.get("https://api.themoviedb.org/3/movie/".concat(n,"?api_key=").concat(l)).then((function(t){return t})).catch((function(t){console.log("EROR")})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var u={getMoviById:function(t){return s.apply(this,arguments)}}})),a.register("Tn86Q",(function(t,e){t.exports=a("aNJCr").getBundleURL("gqlnG")+a("iE7OH").resolve("iNwWb")})),a.register("aNJCr",(function(e,n){var r;t(e.exports,"getBundleURL",(function(){return r}),(function(t){return r=t}));var o={};function a(t){return(""+t).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}r=function(t){var e=o[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(t)return a(t[2])}return"/"}(),o[t]=e),e}})),a.register("fpBey",(function(e,n){t(e.exports,"API_KEY",(function(){return r})),t(e.exports,"API_BAERER",(function(){return o})),t(e.exports,"STORAGE_KEY",(function(){return a}));var r="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI0MWI4Zjk0MzdiZjNmODk5MjgxZjhhM2Y5YmRjMDg5MSIsInN1YiI6IjY0NTY1YjAzOTAzYzUyMDEzODI3ZWIzZCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.qXNl8SarYs-VSAA55-e1i77zVpr6mbLTqlJUsXp4rpE",o="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJmODU0Y2RkODdhYTkwNTNjYTAwMjI5ZmVhNzNlNTkyNSIsInN1YiI6IjYxODZmYWFkZmU2MzE4MDA2NDgzZTdkZSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.vm-UaTyMPJ2HhXiSRvz-VpPqqqKEF-3PBdhfYlg5v3g",a="library"})),a("iE7OH").register(JSON.parse('{"gqlnG":"library.d4416224.js","iNwWb":"default.183d728c.jpg"}'))}();
//# sourceMappingURL=library.d4416224.js.map
