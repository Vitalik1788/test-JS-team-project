function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequired7c6=r),r("kyEFX").register(JSON.parse('{"9NLH0":"catalog.fd1a6008.js","bfHyM":"default.183d728c.jpg","clsB6":"catalog.8d6a3bf9.js","1V5gE":"catalog.a4974f14.js"}')),r("g3iFJ"),r("8oZBs");const i={searchForm:document.getElementById("movieSearchForm"),searchInput:document.getElementById("movieInput"),catalogList:document.getElementById("movieList"),errorContainer:document.querySelector(".error-container"),searchBtn:document.querySelector(".search-button"),cancelBtn:document.querySelector(".cancel-button"),paginationContainer:document.querySelector(".pagination-wrapper"),paginationButton:document.querySelector(".pagination-button"),nextPageBtn:document.querySelector(".next-button"),prevPageBtn:document.querySelector(".prev-button")};var o={};Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e};class s{async getMovies(){const e={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${s.API_KEY}`}};let t="";t=this.searchQuery?`${s.BASE_URL}/search/movie?api_key=${s.API_KEY}&query=${this.searchQuery}&include_adult=false&language=en-US&page=${this.page}`:`${s.BASE_URL}/trending/all/week?api_key=${s.API_KEY}&language=en-US&page=${this.page}`;try{const n=await fetch(t,e);return await n.json()}catch(e){throw console.error(e),e}}incrementPage(){this.page+=1}decrementPage(){this.page-=1}resetPage(){this.page=1}get query(){return this.searchQuery}set query(e){this.searchQuery=e}get total(){return this.totalAmount}set total(e){this.totalAmount=e}resetTotal(){this.totalAmount=0}constructor(){this.searchQuery="",this.page=1,this.totalAmount=0}}e(o)(s,"BASE_URL","https://api.themoviedb.org/3"),e(o)(s,"API_KEY","41b8f9437bf3f899281f8a3f9bdc0891");let c=!1;const l=()=>{if(c)return;const e=document.createElement("div");e.innerHTML='<p class="error-information">OOPS...</p>\n  <p class="error-information">We are very sorry!</p>\n  <p class="error-information">\n    We donâ€™t have any results matching your search.\n  </p>',i.errorContainer.appendChild(e),i.errorContainer.classList.remove("is-hidden"),i.paginationContainer.classList.add("is-hidden"),c=!0};var d;d=new URL(r("kyEFX").resolve("bfHyM"),import.meta.url).toString();var u=r("h85Iw"),g=r("6t6rc"),p=r("62bSP");async function m(t){const n=JSON.parse(localStorage.getItem("genres")),a=t.results.map((async t=>{const a=t.poster_path?`https://image.tmdb.org/t/p/w500${t.poster_path}`:`${e(d)}`,r=(0,g.validateGenres)(t.genre_ids,n),i=await r;return`<li class="card-item" data-id="${t.id}">\n        <img class="film-poster" src="${a}" alt="${t.original_title||t.name}" />\n        <div class="overlay">\n          <div class="film-info">\n            <p class="film-title">${t.original_title||t.name}</p>\n            <div class="film-details">\n              <span class="film-description">${i} | ${new Date(t.release_date).getFullYear()||new Date(t.first_air_date).getFullYear()}</span>\n    <div class="stars-container">${(0,u.default)({voteAverage:t.vote_average,isHero:!1})}</div>            \n      \x3c!-- <span class="film-rating">${t.vote_average.toFixed(1)}</span> --\x3e\n            </div>\n          </div>\n        </div>\n      </li>`})),r=await Promise.all(a);i.catalogList.innerHTML=r.join("");document.querySelector(".listListener").addEventListener("click",(e=>{const t=e.target.closest(".card-item").getAttribute("data-id");(0,p.openModalAboutFilm)(t)}))}const h=new s;let f=1;function v(e){h.getMovies(e).then(y).catch(_)}function y(e){var t;m(e),i.paginationButton.textContent=f,t=e.total_pages,f===t?i.nextPageBtn.setAttribute("disabled","disabled"):i.nextPageBtn.removeAttribute("disabled")}function _(e){i.catalogList.innerHTML="",l(),console.error("An error occurred:",e)}i.searchForm.addEventListener("submit",(function(e){e.preventDefault(),i.paginationContainer.classList.remove("is-hidden"),i.errorContainer.classList.add("is-hidden");const t=i.searchInput.value.trim();h.query=t,h.resetPage(),h.resetTotal(),""===t?(i.catalogList.innerHTML="",l()):async function(){try{const e=await h.getMovies();0===e.total_results?(i.catalogList.innerHTML="",l()):(h.total=e.total_results,m(e),f=e.page,i.paginationButton.textContent=f),i.searchInput.value=""}catch(e){_(e)}}()})),i.cancelBtn.addEventListener("click",(function(){i.cancelBtn.classList.add("is-hidden"),i.searchInput.value=""})),i.searchInput.addEventListener("input",(function(e){e.currentTarget.value.trim()?i.cancelBtn.classList.remove("is-hidden"):i.cancelBtn.classList.add("is-hidden")})),i.nextPageBtn.addEventListener("click",(function(){f+=1,h.incrementPage(),v(f)})),i.prevPageBtn.addEventListener("click",(function(){f>1&&(f-=1,h.decrementPage(),v(f))})),i.errorContainer.classList.add("is-hidden"),i.cancelBtn.classList.add("is-hidden"),v(f),r("7pPMD");
//# sourceMappingURL=catalog.fd1a6008.js.map
